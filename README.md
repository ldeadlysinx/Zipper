# Zipper AI 기반 개인 맞춤형 학습 지원 플랫폼
![image](https://github.com/user-attachments/assets/e9772ecc-4800-443a-8615-bd045c373531)


## ❓ Zipper 란?
- Zipper란 Ai 기반 수능 학습 플랫폼으로  학생들을 위해 수능 문제 로 학습된 AI 기반으로 문제의 해설 및 분석을  제공 하는 프로그램입니다.

## ⚒ 서비스 플로우 구조
![image](https://github.com/user-attachments/assets/ee4cb836-d8c4-403f-9607-f8790a612775)




## 사용기술

프론트엔드: React(JavaScript)
백엔드: SpringBoot(JAVA), MySQL, Flask(AI), AWS EC2,Nginx

## 아키텍처 선택 이유
1.  스프링 시큐리티 -> 강력한 보안 기능 타 백엔드랑 비교할시 추가적인 라이브러리 설치 없이 구현 가능
2.  Restful API 개발이 편함 -> React 와 통신시 기초적인 configuration만 설정시 통신 가능
3.  JPA와 JPQL을 통한 데이터베이스 접근이 직관적 -> 반복되던 CRUD SQL 코드 방지 및 마이그레이션 없이 자동으로 데이터테이블로 적용
4.  스프링의 방대한 커뮤니티 및 오픈소스 라이브러리 덕분에 안정적인 개발에 용이

## 역할

- DB 설계 및 관리
- SpringBoot 와 MySQL을 이용하여 유저,게시판,댓글,알림 테이블 생성 및 관리
- User 생성,로그인,로그아웃 구현

## 🛠 주요 기능
### 🙋‍♀️ 유저 회원가입: 유저이름,아이디,이메일 입력받기
- 이메일 인증: 메일 시스템을 이용해 이메일로 인증번호 전송 Redis로 전송된 인증번호 저장 이후 이메일이 일치하는지 확인
- 비밀번호: 스프링 시큐리티를 통해 입력받은 비밀번호를 암호화
- 로그인 : 일반 로그인 및 소셜서비스(Google,Naver,Kakao) 로그인 OAuth 구현 로그인 한 계정에게 JWT 토큰 발급
- 로그아웃: 로그아웃시 Redis에 JWT 만료시간까지 토큰 보관 기능 구현
- 운영자 계정: 운영자 role을 가지는 유저는 모든 게시글의 권한을 가짐

### 🙋‍♀️ React 와 스프링부트 사이 통신 구현

- CorsConfig를 통해 프런트에서만 백엔드로 통신 가능하게 구현
- Axios를 통해 백엔드와 스프링부트와 통신 및 useEffect와 Redux 기능을 통해 프런트 전역에 적용
- 게시글 및 댓글 CRUD 구현

### 🙋‍♀️ 게시판 CRUD 기능(게시글 작성,조회,수정,삭제)
- 게시글 좋아요 기능
- 게시판 댓글 CRUD 기능 구현
- 좋아요 기능 구현
- 페이징 기능 구현
- 게시판 종류별로 분류

### 🙋‍♀️ 쿼리 작성
- JPQL 쿼리 작성: JPQL을 활용해 복잡한 쿼리 작성, 예를 들어 카테고리별로 게시글을 좋아요 수에 따라 내림차순으로 정렬하고 페이징 처리, 특정 조건에 맞는 게시글 조회 등의 기능을 구현

### 🙋‍♀️ 마이페이지 구현

- 내가 작성한 글 목록
- 내 정보수정(비밀번호, 학년)
- 내가 좋아요한 게시글
- 내가 남긴 댓글

### 🙋‍♀️ 알림기능 구현

- SSE 통신을 통해 기능 구현: 발급받은 JWT로 Sse Emitter를 통해 해당 유저의 게시글의 댓글이 달릴시 알림

##  🔬 도전 과제

1. **JPA N+1 문제**
   - 지연로딩(사용하지 않는 1:N 관계 데이터 호출 x)을 통한 해결책 방안 -> 하지만 관계된 데이터 예를들어 유저만 검색할시에는 문제가 없지만 유저의 댓글까지 검색할경우 추가적인 N+1 문제 발생 근본적인 해결책이 아니다.
   - fetch join을 통한 해결-> 연관된 엔티티들을 한 번의 쿼리로 모두 가져오기 때문에 추가 쿼리가 필요없음 -> 하지만 페이징 처리시 N+1 문제 발생 만능은 아니다 페이징으로 할경우 (OOM) 문제 발생 가능 (페이징일 경우 left join으로 냅둔다)

2. **Hikaricp DB 연결 부족**
   
    - SSE 통신 문제를 구현하는 과정에서  HikariCP (DB Connection pool 을 관리하는 프레임워크) 에 문제 발생
    - SSeEmitter를 생성하는 메서드에서 DB 연결을 없애는 방법 -> JWT 방식때문에 실시간으로 해당 메서드에서 멤버 PK값을 조회 하였지만 다른 메서드로 분리하여 해결
    - Hikari CP 커스텀으로 성능 최적화하기 -> PoolSize = Tn × ( Cm -1 ) + 1 이런 공식이 있지만 최적의 풀 사이즈 찾기 가 힘들다 (직접 여러번 해보기)
